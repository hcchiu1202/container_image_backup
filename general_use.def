BootStrap: library
From: ubuntu:20.04

%environment
    export JUPYTER_RUNTIME_DIR=/tmp

%post
    apt update && apt install -y software-properties-common

    add-apt-repository universe

    add-apt-repository ppa:nilarimogard/webupd8

    apt update && DEBIAN_FRONTEND=noninteractive apt install -y \
        build-essential \
        git \
        wget \
        vim \
        curl \
        zip \
        unzip \
        cmake \
        python3-tk \
        python3-pyqt5 \
        python3-wheel \
        python3-venv \
        python3-distutils \
        python3-cffi \
        python3.8 \
        python3.8-dev \
        xpra \
        xserver-xorg-dev \
        ffmpeg \
        xvfb \
        spyder \
        tar  \
        libsndfile1 \
        espeak \
        streamlink \

    curl -sL https://deb.nodesource.com/setup_16.x | bash
    apt-get install -y nodejs
    npm -g i minyami
    npm cache clean --force command

    wget https://dl.google.com/linux/linux_signing_key.pub
    apt-key add linux_signing_key.pub
    echo 'deb [arch=amd64] http://dl.google.com/linux/chrome/deb/ stable main' | tee /etc/apt/sources.list.d/google-chrome.list
    apt-get update
    apt -f install -y
    DEBIAN_FRONTEND=noninteractive apt-get install -y google-chrome-stable

    apt-get clean && rm -rf /var/lib/apt/lists/*

    # Setup Python3.8 and pip
    ln -s /usr/bin/python3.8 /usr/local/bin/python
    ln -s /usr/bin/python3.8 /usr/local/bin/python3
    curl -sL https://bootstrap.pypa.io/get-pip.py | python3.8

    #unlink /run/shm

    # Install some "general" Python libraries
    python3.8 -m pip --no-cache-dir install\
        setuptools \
        wheel \
        cython \
        numpy \
        pandas \
        Pillow \
        opencv-python \
        matplotlib \
        jupyterlab \
        tqdm \
        PyQt5 \
        fpdf2 \
        youtube-dl \
        requests[socks] \
        m3u8 \
        pycryptodome \
        click \
        yuu \
        beautifulsoup4 \
        selenium \
        chromedriver-binary

%help
    This is a container for mainly video download from sites and image editing etc.
    Contains Python3.8
    # chrome driver path: /usr/local/lib/python3.8/dist-packages/chromedriver_binary/chromedriver/

