BootStrap: docker
From: nvidia/cuda:11.0.3-cudnn8-devel-ubuntu20.04

%environment
TF_FORCE_GPU_ALLOW_GROWTH=true

%post
apt-get update -q
DEBIAN_FRONTEND=noninteractive \
apt-get install -y \
  python3.8 \
  python3-pip \
  wget \
  curl \
  git \
  unzip \
  vim \
  spyder \

export TZ="Asia/Tokyo"

apt-get clean
rm -rf /var/lib/apt/lists/*

ln -s /usr/bin/python3 /usr/local/bin/python
unlink /run/shm

python3 -m pip install -q --upgrade pip setuptools

# Math & Utilities
python3 -m pip install -q \
  numpy \
  scipy \
  jupyter \
  ipywidgets \
  tqdm \
  omegaconf \
  keras-tuner \
  matplotlib

# ML & DS libraries
python3 -m pip install -q \
  pandas \
  scikit-learn \
  catboost \
  optuna \
  seaborn \
  networkx 

# PyTorch
python3 -m pip install -q \
  torch==1.7.1+cu110 \
  torchvision==0.8.2+cu110 \
  torchaudio==0.7.2 \
  -f https://download.pytorch.org/whl/torch_stable.html

# Tensorflow 2
python3 -m pip install -q \
  tensorflow==2.3.1 \
  tensorflow_probability==0.12.1
